(()=>{"use strict";var e,l={122(e,l,t){const o=window.wp.element,n=window.wp.components,r=window.wp.i18n,s=window.wp.apiFetch;var i=t.n(s);const c="/jeec/v1";const a=window.ReactJSXRuntime;function d({isDeleting:e,onConfirm:l,onCancel:t}){return(0,a.jsx)(n.Modal,{title:(0,r.__)("Delete Product","hello-elementor-child"),onRequestClose:t,size:"small",children:(0,a.jsxs)("div",{className:"jeec-delete-confirm",children:[(0,a.jsx)("p",{children:(0,r.__)("Are you sure you want to permanently delete this product?","hello-elementor-child")}),(0,a.jsxs)("div",{className:"jeec-delete-confirm__actions",children:[(0,a.jsx)(n.Button,{variant:"tertiary",onClick:t,disabled:e,children:(0,r.__)("Cancel","hello-elementor-child")}),(0,a.jsx)(n.Button,{variant:"primary",isDestructive:!0,isBusy:e,onClick:l,children:(0,r.__)("Delete","hello-elementor-child")})]})]})})}function h({onAdd:e,onEdit:l,setNotice:t}){const{products:s,loading:h,removeProduct:u}=function(e){const[l,t]=(0,o.useState)([]),[n,s]=(0,o.useState)(!0),a=(0,o.useCallback)(()=>{s(!0),async function(e=100){return i()({path:`${c}/products?per_page=${e}`})}().then(t).catch(()=>{e({status:"error",message:(0,r.__)("Failed to load products.","hello-elementor-child")})}).finally(()=>s(!1))},[e]);(0,o.useEffect)(()=>{a()},[a]);const d=(0,o.useCallback)(async e=>{await async function(e){return i()({path:`${c}/products/${e}`,method:"DELETE"})}(e),t(l=>l.filter(l=>l.id!==e))},[]);return{products:l,loading:n,refresh:a,removeProduct:d}}(t),[m,_]=(0,o.useState)(null),[p,j]=(0,o.useState)(!1),x=(0,o.useCallback)(async()=>{if(null!==m){j(!0);try{await u(m),t({status:"success",message:(0,r.__)("Product deleted.","hello-elementor-child")})}catch{t({status:"error",message:(0,r.__)("Failed to delete product.","hello-elementor-child")})}finally{j(!1),_(null)}}},[m,u,t]);return h?(0,a.jsx)("div",{className:"jeec-loading",children:(0,a.jsx)(n.Spinner,{})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"jeec-header",children:[(0,a.jsx)("h1",{children:(0,r.__)("Products","hello-elementor-child")}),(0,a.jsx)(n.Button,{variant:"primary",onClick:e,children:(0,r.__)("Add New Product","hello-elementor-child")})]}),0===s.length?(0,a.jsxs)("div",{className:"jeec-empty-state",children:[(0,a.jsx)("p",{children:(0,r.__)("No products found. Create your first product!","hello-elementor-child")}),(0,a.jsx)(n.Button,{variant:"primary",onClick:e,children:(0,r.__)("Add New Product","hello-elementor-child")})]}):(0,a.jsxs)("table",{className:"jeec-products-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"thumbnail-cell",children:(0,r.__)("Image","hello-elementor-child")}),(0,a.jsx)("th",{children:(0,r.__)("Product Name","hello-elementor-child")}),(0,a.jsx)("th",{className:"price-cell",children:(0,r.__)("Price","hello-elementor-child")}),(0,a.jsx)("th",{className:"actions-cell",children:(0,r.__)("Actions","hello-elementor-child")})]})}),(0,a.jsx)("tbody",{children:s.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"thumbnail-cell",children:e.featured_image_url?(0,a.jsx)("img",{src:e.featured_image_url,alt:e.title}):(0,a.jsx)("span",{className:"thumbnail-placeholder","aria-label":(0,r.__)("No image","hello-elementor-child"),children:"ðŸ“·"})}),(0,a.jsxs)("td",{children:[(0,a.jsx)("strong",{children:e.title}),e.is_on_sale&&(0,a.jsx)("span",{className:"sale-badge",children:(0,r.__)("Sale","hello-elementor-child")})]}),(0,a.jsx)("td",{className:"price-cell",children:e.is_on_sale?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("s",{children:["$",Number(e.price).toFixed(2)]})," ",(0,a.jsxs)("strong",{children:["$",Number(e.sale_price).toFixed(2)]})]}):(0,a.jsxs)(a.Fragment,{children:["$",Number(e.price).toFixed(2)]})}),(0,a.jsxs)("td",{className:"actions-cell",children:[(0,a.jsx)(n.Button,{variant:"secondary",size:"small",onClick:()=>l(e.id),children:(0,r.__)("Edit","hello-elementor-child")}),(0,a.jsx)(n.Button,{variant:"secondary",isDestructive:!0,size:"small",onClick:()=>_(e.id),children:(0,r.__)("Delete","hello-elementor-child")})]})]},e.id))})]}),null!==m&&(0,a.jsx)(d,{isDeleting:p,onConfirm:x,onCancel:()=>_(null)})]})}function u({imageUrl:e,onSelect:l,onRemove:t}){const s=(0,o.useCallback)(()=>{const e=wp.media({title:(0,r.__)("Select Product Image","hello-elementor-child"),multiple:!1,library:{type:"image"},button:{text:(0,r.__)("Use this image","hello-elementor-child")}});e.on("select",()=>{const t=e.state().get("selection").first().toJSON();l(t.id,t.sizes?.thumbnail?.url||t.url)}),e.open()},[l]);return(0,a.jsxs)("div",{className:"jeec-image-picker",children:[(0,a.jsx)("label",{children:(0,r.__)("Main Image","hello-elementor-child")}),e&&(0,a.jsx)("div",{className:"jeec-image-preview",children:(0,a.jsx)("img",{src:e,alt:""})}),(0,a.jsx)(n.Button,{variant:"secondary",onClick:s,children:e?(0,r.__)("Replace Image","hello-elementor-child"):(0,r.__)("Select Image","hello-elementor-child")}),e&&(0,a.jsx)(n.Button,{variant:"link",isDestructive:!0,onClick:t,children:(0,r.__)("Remove","hello-elementor-child")})]})}function m({categories:e,selected:l,onChange:t}){const s=(0,o.useCallback)((e,o)=>{t(o?[...l,e]:l.filter(l=>l!==e))},[l,t]);return 0===e.length?(0,a.jsx)("p",{className:"jeec-no-categories",children:(0,r.__)("No categories found. Create them under Products â†’ Categories.","hello-elementor-child")}):(0,a.jsx)("fieldset",{className:"jeec-categories-list","aria-label":(0,r.__)("Product categories","hello-elementor-child"),children:e.map(e=>(0,a.jsx)(n.CheckboxControl,{label:e.name,checked:l.includes(e.id),onChange:l=>s(e.id,l)},e.id))})}const _=[];function p({productId:e,onCancel:l,onSaved:t,setNotice:s}){const[d,h]=(0,o.useState)(""),[p,j]=(0,o.useState)(""),[x,g]=(0,o.useState)(""),[v,f]=(0,o.useState)(""),[b,C]=(0,o.useState)(false),[y,N]=(0,o.useState)(""),[S,k]=(0,o.useState)(0),[w,P]=(0,o.useState)(""),[B,O]=(0,o.useState)(_),[$,F]=(0,o.useState)(!!e),[T,D]=(0,o.useState)(!1),E=!!e,R=function(){const[e,l]=(0,o.useState)([]);return(0,o.useEffect)(()=>{(async function(){return i()({path:`${c}/product-categories`})})().then(l).catch(()=>{})},[]),e}();(0,o.useEffect)(()=>{e&&(F(!0),async function(e){return i()({path:`${c}/products/${e}`})}(e).then(e=>{h(e.title),j(e.description),g(e.price?String(e.price):""),f(e.sale_price?String(e.sale_price):""),C(e.is_on_sale),N(e.youtube_video),k(e.featured_image_id),P(e.featured_image_url),O(e.categories)}).catch(()=>{s({status:"error",message:(0,r.__)("Failed to load product.","hello-elementor-child")})}).finally(()=>F(!1)))},[e,s]);const I=(0,o.useCallback)((e,l)=>{k(e),P(l)},[]),M=(0,o.useCallback)(()=>{k(0),P("")},[]),A=(0,o.useCallback)(()=>{if(!d.trim())return void s({status:"error",message:(0,r.__)("Title is required.","hello-elementor-child")});D(!0);const l={title:d.trim(),description:p,price:x?Number.parseFloat(x):0,sale_price:v?Number.parseFloat(v):0,is_on_sale:b,youtube_video:y,featured_image_id:S,categories:B};(E&&e?async function(e,l){return i()({path:`${c}/products/${e}`,method:"POST",data:l})}(e,l):async function(e){return i()({path:`${c}/products`,method:"POST",data:e})}(l)).then(()=>{t(E?(0,r.__)("Product updated successfully.","hello-elementor-child"):(0,r.__)("Product created successfully.","hello-elementor-child"))}).catch(()=>{s({status:"error",message:(0,r.__)("Failed to save product.","hello-elementor-child")})}).finally(()=>D(!1))},[d,p,x,v,b,y,S,B,E,e,t,s]);return $?(0,a.jsx)("div",{className:"jeec-loading",children:(0,a.jsx)(n.Spinner,{})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"jeec-header",children:[(0,a.jsx)("h1",{children:E?(0,r.__)("Edit Product","hello-elementor-child"):(0,r.__)("Add New Product","hello-elementor-child")}),(0,a.jsx)(n.Button,{variant:"tertiary",onClick:l,children:(0,r.__)("â† Back to Products","hello-elementor-child")})]}),(0,a.jsxs)("div",{className:"jeec-product-form",children:[(0,a.jsxs)(n.Panel,{children:[(0,a.jsxs)(n.PanelBody,{title:(0,r.__)("Product Details","hello-elementor-child"),initialOpen:!0,children:[(0,a.jsx)(u,{imageUrl:w,onSelect:I,onRemove:M}),(0,a.jsx)(n.TextControl,{label:(0,r.__)("Title","hello-elementor-child"),value:d,onChange:h,placeholder:(0,r.__)("Product title","hello-elementor-child"),__nextHasNoMarginBottom:!0}),(0,a.jsx)(n.TextareaControl,{label:(0,r.__)("Description","hello-elementor-child"),value:p,onChange:j,rows:5,placeholder:(0,r.__)("Product descriptionâ€¦","hello-elementor-child")}),(0,a.jsxs)("div",{className:"jeec-form-row",children:[(0,a.jsx)(n.TextControl,{label:(0,r.__)("Price ($)","hello-elementor-child"),type:"number",min:0,step:.01,value:x,onChange:g,placeholder:"0.00",__nextHasNoMarginBottom:!0}),(0,a.jsx)(n.TextControl,{label:(0,r.__)("Sale Price ($)","hello-elementor-child"),type:"number",min:0,step:.01,value:v,onChange:f,placeholder:"0.00",__nextHasNoMarginBottom:!0})]}),(0,a.jsx)(n.ToggleControl,{label:(0,r.__)("Is on Sale?","hello-elementor-child"),checked:b,onChange:C,__nextHasNoMarginBottom:!0}),(0,a.jsx)(n.TextControl,{label:(0,r.__)("YouTube Video URL","hello-elementor-child"),type:"url",value:y,onChange:N,placeholder:"https://www.youtube.com/watch?v=...",__nextHasNoMarginBottom:!0})]}),(0,a.jsx)(n.PanelBody,{title:(0,r.__)("Category","hello-elementor-child"),initialOpen:!0,children:(0,a.jsx)(m,{categories:R,selected:B,onChange:O})})]}),(0,a.jsxs)("div",{className:"jeec-form-actions",children:[(0,a.jsx)(n.Button,{variant:"primary",isBusy:T,disabled:T,onClick:A,children:E?(0,r.__)("Update Product","hello-elementor-child"):(0,r.__)("Create Product","hello-elementor-child")}),(0,a.jsx)(n.Button,{variant:"tertiary",onClick:l,disabled:T,children:(0,r.__)("Cancel","hello-elementor-child")})]})]})]})}function j(){const[e,l]=(0,o.useState)("list"),[t,r]=(0,o.useState)(null),[s,i]=(0,o.useState)(null),c=(0,o.useCallback)(()=>{l("list"),r(null)},[]),d=(0,o.useCallback)(()=>{l("add"),r(null)},[]),u=(0,o.useCallback)(e=>{l("edit"),r(e)},[]),m=(0,o.useCallback)(e=>{i({status:"success",message:e}),c()},[c]);return(0,a.jsxs)("div",{className:"jeec-products-app",children:[s&&(0,a.jsx)(n.Notice,{status:s.status,isDismissible:!0,onRemove:()=>i(null),children:s.message}),"list"===e&&(0,a.jsx)(h,{onAdd:d,onEdit:u,setNotice:i}),"add"===e&&(0,a.jsx)(p,{onCancel:c,onSaved:m,setNotice:i}),"edit"===e&&(0,a.jsx)(p,{productId:t,onCancel:c,onSaved:m,setNotice:i})]})}const x=document.getElementById("jeec-products-admin");x&&(0,o.createRoot)(x).render((0,a.jsx)(j,{}))}},t={};function o(e){var n=t[e];if(void 0!==n)return n.exports;var r=t[e]={exports:{}};return l[e](r,r.exports,o),r.exports}o.m=l,e=[],o.O=(l,t,n,r)=>{if(!t){var s=1/0;for(d=0;d<e.length;d++){for(var[t,n,r]=e[d],i=!0,c=0;c<t.length;c++)(!1&r||s>=r)&&Object.keys(o.O).every(e=>o.O[e](t[c]))?t.splice(c--,1):(i=!1,r<s&&(s=r));if(i){e.splice(d--,1);var a=n();void 0!==a&&(l=a)}}return l}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[t,n,r]},o.n=e=>{var l=e&&e.__esModule?()=>e.default:()=>e;return o.d(l,{a:l}),l},o.d=(e,l)=>{for(var t in l)o.o(l,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:l[t]})},o.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={57:0,350:0};o.O.j=l=>0===e[l];var l=(l,t)=>{var n,r,[s,i,c]=t,a=0;if(s.some(l=>0!==e[l])){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(c)var d=c(o)}for(l&&l(t);a<s.length;a++)r=s[a],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},t=globalThis.webpackChunkhello_elementor_child=globalThis.webpackChunkhello_elementor_child||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))})();var n=o.O(void 0,[350],()=>o(122));n=o.O(n)})();